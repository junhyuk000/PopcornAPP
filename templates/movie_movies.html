{% extends "movie_base.html" %}
{% block css %}
<style>
    .carousel-item h5 {
        font-size: 1.5rem;
        color: #cababa;
    }
    
    .carousel-item p {
        font-size: 1rem;
        color: #a79696;
    }

    /* ìºëŸ¬ì…€ ì¢Œìš° ë²„íŠ¼ ìƒ‰ ë³€ê²½ */
    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        filter: invert(1); /* í™”ì‚´í‘œ ì•„ì´ì½˜ ìƒ‰ìƒì„ ë°˜ì „ */
    }

    /* Carousel Indicators ì•„ë˜ë¡œ ì´ë™ ë° ìƒ‰ìƒ ë³€ê²½ */
    .carousel-indicators {
        position: absolute;
        bottom: -50px; /* Carousel ì•„ë˜ë¡œ ì´ë™ */
    }

    .carousel-indicators button {
        background-color: #bfa187 !important; /* ì¸ë””ì¼€ì´í„° ì  ìƒ‰ìƒ */
        border: 1px solid #fff;
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    .carousel-indicators .active {
        background-color: #8a6f55 !important; /* í™œì„±í™”ëœ ì  ìƒ‰ìƒ */
    }

    .swiper {
    position: relative;
    width: 100%;
    max-width: 100vw; /* âœ… í™”ë©´ ë„˜ì§€ ì•Šë„ë¡ ì œí•œ */
    height: 550px;
    padding: 40px 0;
    overflow: hidden; /* âœ… ë„˜ì¹˜ëŠ” ë¶€ë¶„ ìˆ¨ê¹€ */
    }

    .swiper-wrapper {
        display: flex; /* âœ… ìŠ¬ë¼ì´ë“œë“¤ì„ ê°€ë¡œë¡œ ì •ë ¬ */
    }

    .swiper-slide {
        flex: 0 0 auto; /* âœ… Swiperê°€ ìë™ìœ¼ë¡œ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ë„ë¡ ì„¤ì • */
        display: flex;
        align-items: center;
        justify-content: center;
        width: auto; /* âœ… ìŠ¬ë¼ì´ë“œê°€ ë„ˆë¬´ ì‘ì•„ì§€ëŠ” ê²ƒ ë°©ì§€ */
    }

    .swiper-slide img {
        width: 100%;  /* âœ… ë¶€ëª¨ ìš”ì†Œ í¬ê¸°ë¥¼ ë”°ë¥´ê²Œ ì„¤ì • */
        height: auto;
        max-height: 450px;
        object-fit: cover;
        border-radius: 15px;
    }
    /* ì´ë¯¸ì§€ ìœ„ì—ì„œ ìë™ ìŠ¬ë¼ì´ë“œ ë©ˆì¶¤ */
    .swiper-slide:hover {
        cursor: pointer;
    }

    /* ì´ë¯¸ì§€ ì•„ë˜ í…ìŠ¤íŠ¸ */
    .text-overlay {
        position: absolute;
        bottom: -100px; /* ì´ë¯¸ì§€ ì•„ë˜ ë°°ì¹˜ */
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        text-align: center;
        background: rgba(0, 0, 0, 0.8); /* ë°˜íˆ¬ëª… ë°°ê²½ */
        padding: 15px;
        border-radius: 10px;
        transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out;
        opacity: 0; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
    }
    .swiper-slide:hover .text-overlay {
        opacity: 1; /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ í‘œì‹œ */
        bottom: 10px;
    }

    .text-overlay h5,
    .text-overlay p {
        color: #fff;
        margin: 5px 0;
    }
    .text-overlay a {
        color: #ad7b67;
        border-color: #ad7b67;
    }
    .text-overlay a:hover {
        background-color: #ad7b67;
        color: #fff;
    }
    /* ğŸ”º í™”ì‚´í‘œ í¬ê¸° & ìœ„ì¹˜ ìœ ì§€ */
    .swiper-button-next,
    .swiper-button-prev {
        color: #ad7b67 !important;
        width: 50px;
        height: 50px;
        z-index: 10;
        top: 50%;
        transform: translateY(-50%);
    }

    .swiper-button-next {
        right: -50px;
    }

    .swiper-button-prev {
        left: -50px;
    }

    /* ì´ë¯¸ì§€ ì•„ë˜ í…ìŠ¤íŠ¸ */
    .text-overlay {
        position: absolute;
        bottom: -100px; /* ì´ë¯¸ì§€ ì•„ë˜ ë°°ì¹˜ */
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        text-align: center;
        background: rgba(0, 0, 0, 0.8); /* ë°˜íˆ¬ëª… ë°°ê²½ */
        padding: 15px;
        border-radius: 10px;
        transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out;
        opacity: 0; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
    }

    .swiper-slide:hover .text-overlay {
        opacity: 1; /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ í‘œì‹œ */
        bottom: 10px;
    }
    </style>
{% endblock %}
{% block title %}Movie Rankings{% endblock %}

{% block content %}
<div class="container">
    <!-- Swiper ìŠ¬ë¼ì´ë” -->
    <div class="swiper">
        <div class="swiper-wrapper">
            {% for movie in movies_info %}
            <div class="swiper-slide">
                <img src="/static/images/{{ movie.filename }}" alt="{{ movie.title }}">
                <div class="text-overlay">
                    <h5>{{ movie.title }}</h5>
                    <p>Rating: {{ movie.rating }}</p>
                    <p>Rank: {{ movie.rank }}</p>
                    <p>Reviews: {{ movie.reviews }}</p>
                    <a href="/movie_youtube/{{ movie.title }}" class="btn btn-outline-light mx-2">ì˜ˆê³ í¸</a>
                    <a href="/reviews/{{ movie.title }}/{{ movie.id }}" class="btn btn-outline-light mx-2">Review</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
</div>
{% endblock %}

{% block js %}
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var swiper = new Swiper(".swiper", {
            slidesPerView: 5,  // âœ… í•œ ë²ˆì— 2.5ê°œë§Œ ë³´ì´ë„ë¡ ì¡°ì •
            slidesPerGroup: 1, // âœ… í•œ ë²ˆì— 1ê°œì”© ì´ë™
            spaceBetween: 20,
            centeredSlides: true,
            initialSlide: 2,
            loop: true,
            loopAdditionalSlides: 1,
            autoplay: {
                delay: 2000,
                disableOnInteraction: false,
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            effect: "coverflow",
            coverflowEffect: {
                rotate: 0,
                stretch: 30,
                depth: 180,
                modifier: 1,
                slideShadows: false,
            }
        });

        // âœ… ìë™ ìŠ¬ë¼ì´ë“œ ë©ˆì¶¤ ê¸°ëŠ¥ ì¶”ê°€
        document.querySelector(".swiper").addEventListener("mouseenter", function() {
            swiper.autoplay.stop();
        });
        document.querySelector(".swiper").addEventListener("mouseleave", function() {
            swiper.autoplay.start();
        });
    });

</script>
{% endblock %}
